{% extends 'base.html' %}

{% load static %}

{% block vendor %}
  <link rel="stylesheet" href="{% static 'pages/css/railscasts.css' %}">
  <script src="{% static 'pages/js/highlight.pack.js' %}"></script>
  <script>hljs.initHighlightingOnLoad();</script>
{% endblock %}
{% block my_style %}
  <link rel="stylesheet" type="text/css" href="{% static 'pages/css/detail.css' %}">
{% endblock %}


{% block first_block %}
  <div id='page-head'>
    <h2 class='page-title'>Code Display</h2>
  </div>

  <div class='code-snip' data-pk='{{ snippet.id }}'>
    <h3>{{ snippet.title }}</h3>
    <table>
      {% for line in code_lines %}
        <tr class='code-row'>
          <td class='line-number'>{{ forloop.counter }}</td>
          <td><pre class='code-pre'><code data-line='{{ forloop.counter }}'>{{ line }}</code></pre>
          </td>
        </tr>
      {% endfor %}
    </table>
  </div>

  <div id='ano-display'>
  </div>

  <div class='annotations'>
    {% for ano in annotations %}
      <p>{{ ano.code }}</p>
    {% endfor %}
  </div>

{% endblock %}



{% block second_block %}
  <form action='' method='POST' id='com-ano-form'>
    {% csrf_token %}
    <div id='comment-text'>
      {{ form.text }}
    </div>
    <div id='annotation-code'>
      {{ ano_form.code }}
    </div>
    <div class='ano-line-nums'>
      {{ ano_form.line_begin }}
      {{ ano_form.line_end }}
    </div>
    <p><button class='com-ano-submit'>Submit</button></p>
  </form>

  <div id='comments'>
    <h2>Comments</h2>
    {% for c in comments %}
        {% if c.author %}
          <p>{{ c.author }}
        {% else %}
          <p>anon
        {% endif %}
          said</p>

          <p>{{ c.text }}</p>
    {% endfor %}
  </div>
{% endblock %}

{% block my_js %}
  <script src="{% static 'pages/js/detail.js' %}"></script>
{% endblock %}
