{% extends 'base.html' %}

{% load static %}

{% block vendor %}
  <link rel="stylesheet" href="{% static 'pages/css/railscasts.css' %}">
  <script src="{% static 'pages/js/highlight.pack.js' %}"></script>
  <script>hljs.initHighlightingOnLoad();</script>
{% endblock %}
{% block my_style %}
<link rel="stylesheet" type="text/css" href="{% static 'pages/css/detail.css' %}">
{% endblock %}


{% block first_block %}
  <div class='code-snip'>
    <h2 class='page-title'>Code Display</h2>
    <h3>{{ snippet.title }}</h3>
    {% for line in code_lines %}
    <pre><span class='number-span'>{{ forloop.counter|stringformat:"02d" }}</span><code data-line='{{ forloop.counter }}'>{{ line }}</code></pre>
    {% endfor %}
  </div>

  <div class='annotations'>
    {% for ano in annotations %}
      <p>{{ ano }}</p>
    {% endfor %}
  </div>

{% endblock %}

{% block second_block %}
  <form action='' method='POST'>
    <h3>add a comment</h3>
    {% csrf_token %}

    {{ form.text }}

    <p>annotation</p>
    <div class='ano-code'>
      {{ ano_form.code }}
    </div>
    <div class='ano-line-nums'>
      {{ ano_form.line_begin }}
      {{ ano_form.line_end }}
    </div>
    <p></p><button>Submit</button></p>

    <h2>Comments</h2>
    <div class='comments'>
    {% for c in comments %}
        {% if c.author %}
          <p>{{ c.author }}
        {% else %}
          <p>anon
        {% endif %}
          said</p>

        <p>{{ c.text }}</p>
    {% endfor %}
    </div>
  </form>
{% endblock %}

{% block my_js %}
  <script src="{% static 'pages/js/detail.js' %}"></script>
{% endblock %}

